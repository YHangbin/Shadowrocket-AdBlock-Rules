#!name=Test
#!desc=ä¸“é—¨åšæµ‹è¯•ç”¨

# å½©äº‘å¤©æ°”çœŸæ­£æœ‰æ•ˆçš„æ˜¯è¿™ä¸ªï¼Œå¯ä»¥å»æ‰ä¸‹æ–¹åŠ©æ‰‹
[Script]
caiyun_json=type=http-response,pattern=^https?:\/\/wrapper\.cyapi\.cn\/v\d\/activity,requires-body=1,script-path=https://raw.githubusercontent.com/ddgksf2013/Scripts/refs/heads/master/caiyun_json.js

# Tracks å“åº”è„šæœ¬ï¼ˆä¿®æ”¹ /v1/tracks æ¥å£å“åº”ï¼‰
DualSubs.Spotify.Tracks.response = type=http-response,script-path=https://github.com/DualSubs/Spotify/releases/download/v1.9.9/response.bundle.js,pattern=^https?:\/\/api\.spotify\.com\/v1\/tracks\?,max-size=0,requires-body=true,timeout=30,script-update-interval=0,enable=true

# Lyrics è¯·æ±‚è„šæœ¬ï¼ˆè¯·æ±‚ä½“ä¿®æ”¹ï¼Œç”¨äºè·å–æ­Œè¯ï¼‰
DualSubs.Spotify.Lyrics.request = type=http-request,script-path=https://github.com/DualSubs/Spotify/releases/download/v1.9.9/request.bundle.js,pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*),max-size=0,requires-body=true,timeout=30,script-update-interval=0,enable=true

# Translate.lrc å“åº”è„šæœ¬ï¼ˆç¿»è¯‘æ­Œè¯å­ç±»å‹ï¼‰
DualSubs.Spotify.Translate.Lyrics.response = type=http-response,script-path=https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js,pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)subtype=Translate,max-size=0,requires-body=true,timeout=30,script-update-interval=0,enable=true

# External Lyrics å“åº”è„šæœ¬ï¼ˆå¤–éƒ¨æ¥æºæ­Œè¯å­ç±»å‹ï¼‰
DualSubs.Spotify.External.Lyrics.response = type=http-response,script-path=https://github.com/DualSubs/Universal/releases/latest/download/External.Lyrics.response.bundle.js,pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)subtype=External,max-size=0,requires-body=true,timeout=30,script-update-interval=0,enable=true

[URL Rewrite]
# å¯¹åº”çš„é‡å†™è§„åˆ™ï¼ˆShadowrocket ä½¿ç”¨ URL Rewrite æ®µæ¥æ”¾ Surge/QuanX çš„ rewrite è§„åˆ™ï¼‰
# ğŸ¿ï¸ DualSubs.Spotify.Tracks.response
^https?:\/\/api\.spotify\.com\/v1\/tracks\? url script-response-body https://github.com/DualSubs/Spotify/releases/download/v1.9.9/response.bundle.js

# ğŸ¿ï¸ DualSubs.Spotify.Lyrics.request
^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*) url script-request-body https://github.com/DualSubs/Spotify/releases/download/v1.9.9/request.bundle.js

# ğŸ¿ï¸ DualSubs.Spotify.Translate.Lyrics.response
^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)subtype=Translate url script-response-body https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js

# ğŸ¿ï¸ DualSubs.Spotify.External.Lyrics.response
^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)subtype=External url script-response-body https://github.com/DualSubs/Universal/releases/latest/download/External.Lyrics.response.bundle.js


[MITM]
hostname = %APPEND% *.cyapi.cn,api.spotify.com,spclient.wg.spotify.com
